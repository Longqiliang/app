function reloadWvLoad(){var e=document.createElement("div");e.innerHTML='<h4>网络不给力，请检查网络！</h4><button id="reloadWv" class="mui-btn mui-btn-blue">重新加载</button>',e.setAttribute("class","empty-show"),document.body.appendChild(e)}function openView(e,t,i,n){e=e||{},t=t||{},i=i||{},n=n||"";var o=e.url,a=e.id||o,r=e.load||!1;if(o){plus.webview.currentWebview();var p=plus.webview.getWebviewById(a);p||(p=plus.webview.create(o,a,t,i),"object"==typeof n&&p.append(n)),r?p.addEventListener("rendered",function(){setTimeout(function(){p.show("pop-in")},300)}):p.addEventListener("titleUpdate",function(){setTimeout(function(){p.show("pop-in")},100)})}}function appendHtml(e,t){if("string"==typeof t){var i=document.createElement("div");i.innerHTML=t;for(var n=document.createDocumentFragment();i.firstChild;)n.appendChild(i.firstChild);e.appendChild(n)}else e.appendChild(t)}function DeEight(e){var t,i=new Array,n=e.split("\\");for(t=1;t<n.length;t++)i+=String.fromCharCode(parseInt(n[t],8));return e=i}function againData(){var e=JSON.parse(localStorage.getItem("$state"));if(e){var t,i=DeEight(e.psd),n={company_code:e.companyCode,user_name:e.loginName,password:i},o=new plus.net.XMLHttpRequest;o.onreadystatechange=function(){switch(o.readyState){case 4:if(200==o.status){var i=JSON.parse(o.responseText);if(1==i.success)return void(t||(t=!0,e.token=i.access_token,localStorage.setItem("$state",JSON.stringify(e)),plus.webview.currentWebview().reload()));plus.navigator.closeSplashscreen(),plus.nativeUI.toast("登录失败，请重新登录！"),openView({url:"login.html",id:"login"})}else plus.navigator.closeSplashscreen(),reloadWvLoad()}},o.open("POST","http://fttsoft.net:9201/ftt_cloud_api/api/UserLogin"),o.setRequestHeader("Content-Type","application/json"),o.send(n)}}!function(e){e.createHeadView=function(e){var t=function(e){return null!==e&&"object"==typeof e},i=function(e,n){for(var o in n){var a=e[o],r=n[o];a!==r&&(t(r)?(a=a||{},e[o]=i(a,r)):e[o]=r)}return e},n={viewId:"",id:"",height:"45px",title:"",titleColor:"#000000",fontSize:"16px",backgroundColor:"#ffffff",borderColor:"#ffffff",back:!0,rightIcon:!1,rightIconBase:"",textAlign:"center"};n=i(n,e);var o=new plus.nativeObj.View(n.id,{height:n.height,position:"dock",width:"100%",dock:"top"});if(o.drawRect(n.backgroundColor),o.drawRect(n.borderColor,{top:parseFloat(n.height)-1+"px",height:"1px"}),o.drawText(n.title,{left:"55px"},{color:n.titleColor,size:n.fontSize,align:n.textAlign}),n.back){parseFloat(n.height);var a=new plus.nativeObj.Bitmap("icon_back");a.loadBase64Data("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAAlAQMAAADY/jOoAAAABlBMVEX///////9VfPVsAAAAAnRSTlP/AOW3MEoAAABlSURBVBjTjdChFcAgDATQ9FUgGaGjMBqMxiiMgIzgcRWXq0AV8w1JLjEgAXDDDlfo4QxHpv2hrVCrANy2AYDbuqjfdCY6Mu2Ftkr/Pv1Xvfqpv+ZpvvIo35dX+bXPPPZdxz14nxe0trxVs1baUQAAAABJRU5ErkJggg==",function(){o.drawBitmap(a,{},{width:"24px",height:"18px",top:"14px",left:"10px"})}),o.addEventListener("click",function(t){if(t.clientX<44){var i=plus.webview.getWebviewById(e.viewId);i&&i.close()}},!1)}if(n.rightIcon){parseFloat(n.height);var r=new plus.nativeObj.Bitmap("icon_right"),p=n.rightIconBase;r.loadBase64Data(p,function(){o.drawBitmap(r,{},{width:"77px",height:"42px",top:"0px",right:"40px"})})}return o},e("body").on("tap","#reloadWv",function(){plus.webview.currentWebview().reload()}),e.requestLoad=function(){var e=JSON.parse(localStorage.getItem("$state"));if(e){var t=DeEight(e.psd);e.companyCode,e.loginName}}}(mui);